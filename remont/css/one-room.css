/* ===== one-room.css — страница "Ремонт однокомнатной квартиры" ===== */

/* Брендовые токены (фолбэки, если palette.css ещё не прогружен) */
:root{
  --brand-600: #166534;         /* основной зелёный */
  --brand-500: #1a7a3e;
  --brand-400: #2da14e;
  --brand-accent: #70d009;      /* светлый акцент */
  --surface-d: #0f172a;         /* тёмный фон карточек */
  --surface-d-2:#0b1220;        /* ещё темнее для слоёв */
  --text-on-dark: #e5e7eb;
  --ring: color-mix(in oklab, var(--brand-600) 28%, #ffffff);
  --shadow: 0 .16rem .8rem rgba(0,0,0,.25);

  /* Слайдер */
  --hud-color: #fff;
  --bar-bg: color-mix(in oklch, #ffffff 25%, transparent);
  --bar-fg: var(--brand-accent);
  --bar-h: .25rem;
}

/* Скрываем бургер-меню на всех страницах, КРОМЕ главной (.page-index) */
body:not(.page-index) .site-header__burger,
body:not(.page-index) .nav-toggle,
body:not(.page-index) .site-header__burger-line {
    display: none !important;
}

/* Резервируем место под шапку, пока partial не подгрузился */
header[data-include="/partials/header.html"] {
  min-height: 4.5rem; /* подгони под реальную высоту шапки */
  display: block;
}


/* Базовая геометрия */
main.case-page{ padding: 1.2rem 0; }
.content{ font-size: 1.25rem; line-height: 1.55; } /* ~20px/31px */

/* Заголовки секций с бренд-акцентом */
.case-section-title{
  position: relative;
  margin: 1.2rem 0 .8rem;
  padding-block: .2rem;
  line-height: 1.2;
}
.case-section-title::after{
  content:"";
  display:block;
  height: .24rem;
  width: 6rem;
  margin-top: .4rem;
  border-radius: 999rem;
  background: linear-gradient(90deg, var(--brand-600), color-mix(in oklab, var(--brand-600) 55%, var(--brand-accent)));
}

/* Фиксированная структура мета-блока */
.case-meta{
display:grid;
gap:.8rem;
grid-template-columns:repeat(auto-fit,minmax(14rem,1fr));
margin:.8rem 0;
min-height:6rem; /* резерв под 3 строки × 2rem */
contain:layout paint;
}

.case-meta__col{
display:flex;
flex-direction:column;
gap:.4rem;
color:#1a1a1a;
}

.case-meta__row{
display:flex;
gap:.4rem;
margin:0;
padding:0;
font-size:.95rem;
line-height:1.4;
min-height:1.33rem; /* font-size × line-height */
color:#1a1a1a;
}

.case-meta__row strong{
flex-shrink:0;
min-width:5ch; /* минимальная ширина лейбла */
color:#1B5E20;
font-weight:700;
}

.case-meta__row span,
.case-meta__row time{
flex:1;
}

@media(prefers-color-scheme:dark){
.case-meta__col,
.case-meta__row{
color:#f0f0f0;
}
.case-meta__row strong{
color:#70d009;
}
}

/* Двухколоночный блок: описание + галерея */
.case-two-col{ display: grid; gap: 1.6rem; }
@media (min-width: 56rem){ .case-two-col{ grid-template-columns: 1.2fr .8fr; } }

/* KPI-чипы */
.case-kpi{
  display: grid;
  gap: .8rem;
  grid-template-columns: repeat(2, minmax(0,1fr));
  margin: .8rem 0 1.2rem;
}
@media (min-width: 48rem){ .case-kpi{ grid-template-columns: repeat(4, minmax(0,1fr)); } }
.kpi{
  padding: 1.2rem;
  border-radius: 1.2rem;
  color: var(--text-on-dark);
  background:
    radial-gradient(80rem 40rem at 110% -20%, color-mix(in oklab, var(--brand-accent) 18%, var(--surface-d)) 0%, transparent 55%),
    var(--surface-d);
  outline: .12rem solid color-mix(in oklab, var(--brand-600) 26%, transparent);
  box-shadow: var(--shadow);
}
.kpi strong{ font-size: 1.2rem; display:block; }
.kpi small{ display:block; opacity:.88; margin-top: .2rem; }

/* Таймлайн по дням */
.case-timeline{
  counter-reset: day;
  display: grid;
  gap: 1rem;
  margin-top: .8rem;
}
.case-timeline .step{
  position: relative;
  color: var(--text-on-dark);
  background: var(--surface-d);
  border-radius: 1rem;
  padding: 1rem 1.2rem 1rem 1.4rem;
  box-shadow: var(--shadow);
  border-inline-start: .24rem solid var(--brand-600);
}
.case-timeline .step::before{
  counter-increment: day;
  content: "День " counter(day) " — ";
  font-weight: 700;
  color: var(--brand-accent);
}

/* Материалы (две колонки, бренд-маркеры) */
.material-list{
  columns: 1;
  column-gap: 2rem;
  margin-top: .6rem;
}
@media (min-width: 56rem){ .material-list{ columns: 2; } }
.material-list li{
  break-inside: avoid;
  list-style: none;
  position: relative;
  padding-left: 1.4rem;
  margin: .4rem 0;
}
.material-list li::before{
  content:"";
  position: absolute; left: 0; top: .6rem;
  width: .7rem; height: .7rem;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, var(--brand-accent), var(--brand-600));
  box-shadow: 0 0 0 .12rem color-mix(in oklab, var(--brand-600) 25%, transparent);
}

/* Галерея — аккуратные рамки в цвет бренда */
.case-gallery .case-grid img{
  border-radius: .8rem;
  outline: .12rem solid color-mix(in oklab, var(--brand-600) 22%, transparent);
  transition: transform .2s ease, box-shadow .2s ease;
}
.case-gallery img[data-full]{ cursor: zoom-in; }
.case-gallery img[data-full]:hover{
  transform: translateY(-.08rem);
  box-shadow: 0 .4rem 1rem rgba(0,0,0,.18);
}

/* Видео-контейнер (если потребуется) */
.video-wrap{
  aspect-ratio: 16/9;
  background: var(--surface-d-2);
  border-radius: 1rem;
  overflow: hidden;
  outline: .14rem solid color-mix(in oklab, var(--brand-600) 28%, transparent);
  box-shadow: 0 .4rem 1.2rem rgba(0,0,0,.35);
}
.video-wrap video{ width: 100%; height: 100%; display:block; }

/* ===== СЛАЙДЕР (Сшитые кадры) ===== */
.slides{
  position:relative;
  border-radius:1rem;
  overflow:clip;
  box-shadow:0 .5rem 2rem rgba(0,0,0,.1);
  background:#0a0a0a;
  isolation:isolate;
}
.slides::after{ /* мягкая виньетка */
  content:"";
  position:absolute; inset:0; pointer-events:none;
  background: radial-gradient(120% 80% at 50% 50%, rgba(0,0,0,0) 60%, rgba(0,0,0,.20) 100%);
  mix-blend-mode:multiply;
}
.slides__viewport{ position:relative; width:100%; aspect-ratio:16/9; }
.slide{
  position:absolute; inset:0;
  opacity:0; transform:scale(.98);
  transition:opacity .5s ease, transform .6s ease;
  display:grid; place-items:end; background:#111;
}
.slide.is-active{ opacity:1; transform:scale(1); }
.slide>img{
  position:absolute; inset:0; width:100%; height:100%;
  object-fit:cover; will-change: transform;
  backface-visibility: hidden; transform: translateZ(0) scale(1);
  transform-origin: 50% 50% .1px;
}
/* подпись */
.slide .slide__caption{
  position:relative;
  width:max(29%,20rem);
  text-align: center;
  margin:0 1rem 1rem;
  padding:.75rem 1rem;
  border-radius:.75rem;
  background:color-mix(in oklch,white 10%,transparent);
  -webkit-backdrop-filter: blur(6px); backdrop-filter: blur(6px);
  color:#fff; font:500 1rem/1.3 Manrope,system-ui;
  box-shadow:0 .5rem .5rem rgba(0,0,0,.25);
  transform: translateY(.5rem); opacity:.0;
}
.slide.is-active .slide__caption{ opacity:1; transform: translateY(0); transition: transform .45s ease, opacity .45s ease .05s; }
@media (prefers-color-scheme: dark){
  .slide .slide__caption{ background:color-mix(in oklch,black 40%,transparent); color:#f5f5f5; }
}

/* Навигация/точки */
.slides__nav{
  position:absolute; top:50%; transform:translateY(-50%);
  z-index:2; width:2.5rem; height:2.5rem;
  border:0; border-radius:50%;
  background: var(--brand-600); color:#fff;
  display:grid; place-items:center; cursor:pointer; opacity:.9;
}
.slides__nav:hover{ opacity:1; }
.slides__nav--prev{ left:.75rem; }
.slides__nav--next{ right:.75rem; }

.slides__dots{
  position:absolute; left:50%; bottom:.75rem; transform:translateX(-50%);
  display:flex; gap:.5rem; z-index:2;
}

.dot{
min-width:48px;
min-height:48px;
padding:1rem; /* увеличена зона клика */
border-radius:999rem;
border:0;
background:transparent; /* прозрачный фон, виден только индикатор */
opacity:1;
cursor:pointer;
touch-action:manipulation;
position:relative;
display:inline-flex;
align-items:center;
justify-content:center;
}

.dot::before{
content:"";
width:.625rem;
height:.625rem;
border-radius:999rem;
background:color-mix(in oklch,white 60%,transparent);
transition:width .25s ease,background .25s ease;
}

.dot.is-active::before{
width:1.5rem;
background:var(--brand-accent);
}

/* Hover для десктопа */
@media(hover:hover){
.dot:hover::before{
background:color-mix(in oklch,white 80%,transparent);
}
}

/* HUD и прогресс-бар (визуал, логика — в JS) */
.slides__hud{
  position:absolute; top:.5rem; left:.75rem; z-index:3;
  display:flex; align-items:center; gap:.5rem;
  padding:.25rem .5rem; border-radius:.5rem;
  color:var(--hud-color); font:600 .875rem/1 Manrope,system-ui;
  background: color-mix(in oklch, black 35%, transparent);
  -webkit-backdrop-filter: blur(6px); backdrop-filter: blur(6px);
}
.hud__rec-dot{
  width:.5rem; height:.5rem; border-radius:50%;
  background:#ff3b30; box-shadow:0 0 .5rem rgba(255,59,48,.9);
  animation: recPulse 1.2s ease-in-out infinite;
}
@keyframes recPulse{ 
  0%, 100%{ transform:scale(1); opacity:1; } 
  50%{ transform:scale(1.25); opacity:.6; } 
}

.slides__bar{
  position:absolute; left:.75rem; right:.75rem; bottom:.5rem; z-index:3;
  height:var(--bar-h);
  background: var(--bar-bg);
  border-radius:999rem; overflow:hidden;
  contain: layout paint;
  transform: translateZ(0);
}
.slides__bar-inner{
  height:100%; width:0%; /* JS анимирует ширину по интервалу 8000 мс */
  background: var(--bar-fg);
  will-change: width;
}

/* На паузе (hover/невидимость вкладки) — точка REC замирает */
.slides[data-paused="true"] .hud__rec-dot{ animation-play-state: paused; opacity:.5; }

/*[data-aos] {*/
/*  transform: none !important;*/
/*}*/


/* ===== FAQ ===== */
.faq details{
  background: var(--surface-d);
  color: var(--text-on-dark);
  border-radius: 1rem;
  padding: .8rem 1rem;
  border: .1rem solid color-mix(in oklab, var(--brand-600) 18%, transparent);
  transition: border-color .2s ease;
}
.faq details + details{ margin-top: .8rem; }
.faq details[open]{ border-color: color-mix(in oklab, var(--brand-600) 45%, transparent); }
.faq summary{ cursor: pointer; }

/* ===== CTA (контраст текста усилен) ===== */
/* CTA кнопки — контраст 7.5:1+ */
.case-cta .btn,
.btn-cta-calc{
background-color:#1B5E20!important;
color:#FFFFFF!important;
border:.12rem solid #0D3D12!important;
font-weight:700!important;
text-shadow:none!important;
}

.case-cta .btn:hover,
.btn-cta-calc:hover{
background-color:#0D3D12!important;
color:#FFFFFF!important;
}

.btn-badge{
background:#0D3D12!important;
color:#FFFFFF!important;
font-weight:700!important;
}

.btn-cta__main{
color:#FFFFFF!important;
font-weight:700!important;
}

.btn.btn--ghost{
background:transparent!important;
border:.12rem solid #1B5E20!important;
color:#1B5E20!important;
}

.btn.btn--ghost:hover{
background:color-mix(in oklab,#1B5E20 8%,white)!important;
color:#1B5E20!important;
}

@media(prefers-color-scheme:dark){
.btn.btn--ghost{
color:#70d009!important;
border-color:#70d009!important;
}
.btn.btn--ghost:hover{
background:color-mix(in oklab,#70d009 12%,transparent)!important;
}
}


.btn.btn--ghost{
  border-color: color-mix(in oklab, var(--brand-600) 45%, #fff);
  color: var(--brand-600) !important;
}
.btn.btn--ghost:hover{ background: color-mix(in oklab, var(--brand-accent) 12%, #fff); }

/* Бейдж -10% (позиционирование мягче под круглую кнопку) */
.btn-badge{
  position:absolute; left:-.1rem; top:.1rem;
  padding:.25rem .5rem; border-radius:.5rem;
  background:#166534; color:#fff;
  font:700 .75rem/1 Manrope,system-ui;
  box-shadow:0 .15rem .4rem rgba(0,0,0,.2);
}

.btn--ghost, .link-btn {
  color: #1B5E20 !important;
  border-color: #1B5E20 !important;
}
.btn--ghost:hover, .link-btn:hover {
  color: #ffffff !important;
  background-color: #1B5E20 !important;
}

/* ===== Вспомогательное ===== */
.visually-hidden{
  position:absolute !important;
  width:1px; height:1px;
  margin:-1px; padding:0; border:0;
  overflow:hidden; clip:rect(0 0 0 0);
  clip-path:inset(50%);
}

/* Тёмная/светлая адаптация */
@media (prefers-color-scheme: light){
  .kpi,
  .case-timeline .step,
  .faq details{ color: #0b1220; background: #ffffff; }
  .video-wrap{ background: #f6f8fb; }
  .material-list li::before{
    box-shadow: 0 0 0 .12rem color-mix(in oklab, var(--brand-600) 18%, #ffffff);
  }
}

/* === Fix: двухколоночный блок "Описание и галерея" === */
.case-body.case-two-col{
  display:grid;
  gap: 1.2rem;
}


@media (min-width: 56rem){
  .case-body.case-two-col{
    grid-template-columns: 2fr 1.5fr; /* шире текст, нормальная ширина галереи */
    align-items: start;
  }
}

/* Описание — читабельная ширина и отступы списка */
.case-desc {
    max-width: 65ch;
}
.case-desc ul{
  margin: .6rem 0 0 1.2rem;
  padding: 0;
}
.case-desc li{ margin: .35rem 0; }

/* Галерея в правой колонке: превью во всю доступную ширину */
.case-gallery .case-grid{
  display:grid;
  gap: .6rem;
  grid-template-columns: 1fr;        /* одно превью в ряд — во всю ширину колонки */
}
.case-gallery img{
  display:block;
  width: 100%;
  height: auto;
  border-radius: .8rem;
  outline: .12rem solid color-mix(in oklab, var(--brand-600) 22%, transparent);
}

img {
  aspect-ratio: attr(width) / attr(height);
  display: block;
}

/* подпись под галереей — чуть тише и компактнее */
.lightbox__caption{
  margin-top: .4rem;
  font-size: .9rem;
  opacity: .8;
}

/* Мелкие правки доступности/типографики заголовков внутри секции */
.case-body .case-section-title{
  margin-top: 0;          /* первый заголовок секции без лишнего зазора */
}
.case-gallery .case-section-title{
  margin-top: .2rem;
}


/* Стабильный скролл, чтобы не дёргало страницу при лайтбоксе/модалках */
html{ scrollbar-gutter: stable both-edges; }
body.scroll-lock{ overflow:hidden; overscroll-behavior:none; }

header[data-include] { min-height: 64px; }
footer[data-include] { min-height: 200px; }
.case-page { contain: layout; }

@media screen and (max-width: 768px) { 
  ul.case-meta li.case-meta__col {
    background-color: #4072d6; /* Темный фон */
    color: #fff; /* Белый текст */
    padding: 10px; /* Отступы для лучшей читаемости */
    border-radius: 8px; /* Закругленные углы */
    margin: 5px 0; /* Отступы между колонками */
  }

  /* Дополнительные отступы для строк внутри колонок */
  ul.case-meta li.case-meta__col div.case-meta__row {
    margin-bottom: 8px;
  }
}

html, body {
  overflow-x: hidden;
  max-width: 100vw;
}

/* Страховка для контейнеров */
.container,
.case-page,
main {
  max-width: 100%;
  overflow-x: hidden;
}

/* Частые виновники — изображения и таблицы */
img, video, iframe, table {
  max-width: 100%;
}

/* Слайдер — проверьте viewport */
.slides__viewport {
  overflow: hidden;
  max-width: 100%;
}